---
site_name: MYDLjE
templates_root: templates/cpanel
#get MORE strict
types:
  html: 'application/xhtml+xml; charset=utf-8'
plugins:
  alloy_renderer:
    syntax: TT
    template_options:
      TRIM: 1
      #Note: INCLUDE_PATH works only from within templates
      #INCLUDE_PATH is relative to MOJO_HOME(for now).
      INCLUDE_PATH:
        - templates
        - templates/cpanel
      #DEBUG: 1
      PRE_PROCESS:
        - cpanel_pre_process.tt
        - form_macros_pre_process.tt
        - macros_pre_process.tt
        - cpanel_macros_pre_process.tt
      COMPILE_PERL: 2
      LOAD_PERL: 1
      DEFAULT: template_not_found.tt
      ENCODING: 'UTF-8'
      #EVAL_PERL: *true      #use perl in templates only as last resort - not recommended
      PLUGINS:
        PageTree: MYDLjE::Template::PageTree
      #TODO if needed 
      #
      POST_CHOMP: '~'
      PRE_CHOMP: '~'
      SEMICOLONS: 0
      SHOW_UNDEFINED_INTERP: 0

test_utf8: 试验,δοκιμή,проба 

#now these are almost hardcodded
routes:
  /loginscreen:
    order: 1
    to: 'auth#loginscreen'
  /isauthenticated:
    order: 2
    to: 'auth#isauthenticated'
      
#almost all routes in the cpanel app require authentication
login_required_routes:
  /logout:
    via:
      - get
    to:
      controller: auth
      action: logout
  /:controller/:action:
    order: 11
    to: 'home#home'
  /:controller/:action/:id:
    order: 111
    to: 
      controller: content
      action: pages
      id: '0'

#We describe here the items in main_left_navigation.html.tt
#All plugins must/should provide their items if they want to be present in this menu.
#All menu items will be output as c.l('Item'). So menu items can be translated.
#"icons" are in $MOJO_HOME/pub/css/icons/
#"routes" are routes and are expected to have controllers wich will handle them.
# TODO: implement main_left_navigation as a table in the database so we can use the permission system.
main_left_navigation:
  -
    header: Site
    items:
      -
        title: Domains
        icon: page_world.png
        route: /site/domains
      -
        title: Pages
        icon: layout.png
        route: /site/pages
      -
        title: Templates
        icon: layout_code.png
        route: /site/templates
      -
        title: I18N&L10N
        icon: text_letter_omega.png
        route: /site/i18nl10n
  -
    header: Content
    items:
      -
        title: Notes
        icon: note.png
        route: /content/notes
      -
        title: Articles
        icon: article.png
        route: /content/articles
      -
        title: Questions
        icon: question.png
        route: /content/questions
      -
        title: Books
        icon: book.png
        route: /content/books
      -
        title: Pages
        icon: page.png
        route: /content/pages
      -
        title: Bricks
        icon: bricks.png
        route: /content/bricks
      -
        title: All types
        icon: zoom.png
        route: /content/list
  -
    header: Accounts
    items:
      -
        title: Users
        icon: user.png
        route: /accounts/users
      -
        title: Groups
        icon: group.png
        route: /accounts/groups
      -
        title: Abilities
        icon: group_gear.png
        route: /accounts/abilities
  -
    header: System
    items:
      -
        title: Settings
        icon: wrench.png
        route: /system/settings
      -
        title: Cache
        icon: database_refresh.png
        route: /system/cache_management
      -
        title: Plugins
        icon: plugin.png
        route: /system/plugins
      -
        title: Log
        icon: page_error.png
        route: /system/log
      -
        title: Files
        icon: folder_page.png
        route: /system/files
      -
        title: Preferences
        icon: user_edit.png
        route: /system/preferences


#TODO: Implement eCommerce as a MYDLjE::Plugin::Ecommerce
  -
    header: eCommerce
    items:
      -
        title: Stores
        icon: cart_edit.png
        #list stores
        route: /ecommerce/stores
      -
        title: Merchants
        icon: user_suit.png
        route: /ecommerce/merchants
      -
        title: Products
        icon: box.png
        route: /ecommerce/products
      -
        title: Rules and Coupons
        icon: tag_blue_edit.png
        route: /ecommerce/rulescoupons
  -
    header: Another Plugin
    items:
      -
        title: Settings
        icon: wrench.png
        route: /someplugin/settings

MYDLjE::Content::Form::ui:
  data_type:
    - page
    - book
    - chapter
    - article
    - question
    - answer
    - note
    - brick
  data_format:
    - text
    - textile
    - markdown
    - html
    - template
    
